var documenterSearchIndex = {"docs":
[{"location":"nfdrs/#National-Fire-Danger-Rating-System-(NFDRS)","page":"NFDRS","title":"National Fire Danger Rating System (NFDRS)","text":"","category":"section"},{"location":"nfdrs/#Overview","page":"NFDRS","title":"Overview","text":"The National Fire Danger Rating System (NFDRS) is a comprehensive system for assessing fire danger across wildlands in the United States. This implementation provides ModelingToolkit.jl components for the NFDRS equations, enabling integration with other Earth system models.\n\nReference: Cohen, Jack D.; Deeming, John E. \"The National Fire-Danger Rating System: basic equations.\" Gen. Tech. Rep. PSW-82. Berkeley, CA: Pacific Southwest Forest and Range Experiment Station, Forest Service, U.S. Department of Agriculture; 1985. 16 p.","category":"section"},{"location":"nfdrs/#Implementation","page":"NFDRS","title":"Implementation","text":"This section demonstrates the structure of the NFDRS ModelingToolkit.jl components.","category":"section"},{"location":"nfdrs/#Unit-Convention","page":"NFDRS","title":"Unit Convention","text":"This implementation uses SI units throughout for compatibility with other EarthSciML components:\n\nQuantity SI Unit Original NFDRS Unit\nTemperature K (Kelvin) °F (Fahrenheit)\nFuel loading kg/m² tons/acre, lb/ft²\nFuel bed depth m ft\nSAV ratio m⁻¹ ft⁻¹\nHeat of combustion J/kg Btu/lb\nWind speed m/s mph\nRate of spread m/s ft/min\nMoisture content dimensionless (0-1) percent\nDensity kg/m³ lb/ft³\n\nThe original NFDRS equations use imperial units. All empirical coefficients have been converted to SI units, with conversion factors explicitly defined in the source code.","category":"section"},{"location":"nfdrs/#Equilibrium-Moisture-Content-System","page":"NFDRS","title":"Equilibrium Moisture Content System","text":"The EMC component calculates equilibrium moisture content using regression equations (Eq. 1a, 1b, 1c from Cohen & Deeming 1985):\n\nusing WildlandFire\nusing ModelingToolkit\nusing DataFrames\nusing Symbolics\nusing DynamicQuantities\n\nemc = EquilibriumMoistureContent()\n\n# Parameters\nparams = parameters(emc)\nDataFrame(\n    :Name => [string(Symbolics.tosymbol(p, escape = false)) for p in params],\n    :Units => [string(dimension(ModelingToolkit.get_unit(p))) for p in params],\n    :Description => [ModelingToolkit.getdescription(p) for p in params]\n)\n\n# Variables\nvars = unknowns(emc)\nDataFrame(\n    :Name => [string(Symbolics.tosymbol(v, escape = false)) for v in vars],\n    :Units => [string(dimension(ModelingToolkit.get_unit(v))) for v in vars],\n    :Description => [ModelingToolkit.getdescription(v) for v in vars]\n)","category":"section"},{"location":"nfdrs/#Equations","page":"NFDRS","title":"Equations","text":"The EMC equations (Eq. 1a, 1b, 1c from Cohen & Deeming 1985):\n\nequations(emc)","category":"section"},{"location":"nfdrs/#Dead-Fuel-Moisture-Models","page":"NFDRS","title":"Dead Fuel Moisture Models","text":"","category":"section"},{"location":"nfdrs/#1-Hour-Timelag-Fuel-Moisture","page":"NFDRS","title":"1-Hour Timelag Fuel Moisture","text":"","category":"section"},{"location":"nfdrs/#10-Hour-Timelag-Fuel-Moisture","page":"NFDRS","title":"10-Hour Timelag Fuel Moisture","text":"","category":"section"},{"location":"nfdrs/#100-Hour-Timelag-Fuel-Moisture","page":"NFDRS","title":"100-Hour Timelag Fuel Moisture","text":"","category":"section"},{"location":"nfdrs/#1000-Hour-Timelag-Fuel-Moisture","page":"NFDRS","title":"1000-Hour Timelag Fuel Moisture","text":"","category":"section"},{"location":"nfdrs/#Live-Fuel-Moisture-Models","page":"NFDRS","title":"Live Fuel Moisture Models","text":"","category":"section"},{"location":"nfdrs/#Herbaceous-Fuel-Moisture","page":"NFDRS","title":"Herbaceous Fuel Moisture","text":"","category":"section"},{"location":"nfdrs/#Woody-Fuel-Moisture","page":"NFDRS","title":"Woody Fuel Moisture","text":"","category":"section"},{"location":"nfdrs/#Fuel-Loading-Transfer","page":"NFDRS","title":"Fuel Loading Transfer","text":"","category":"section"},{"location":"nfdrs/#Fire-Behavior-Indices","page":"NFDRS","title":"Fire Behavior Indices","text":"","category":"section"},{"location":"nfdrs/#Spread-Component","page":"NFDRS","title":"Spread Component","text":"The Spread Component is the most complex subsystem, implementing Rothermel's fire spread model:\n\nsc = SpreadComponent()\n\n# Parameters with units\nparams = parameters(sc)\nDataFrame(\n    :Name => [string(Symbolics.tosymbol(p, escape = false)) for p in params],\n    :Units => [string(dimension(ModelingToolkit.get_unit(p))) for p in params],\n    :Description => [ModelingToolkit.getdescription(p) for p in params]\n)","category":"section"},{"location":"nfdrs/#Energy-Release-Component","page":"NFDRS","title":"Energy Release Component","text":"","category":"section"},{"location":"nfdrs/#Burning-Index","page":"NFDRS","title":"Burning Index","text":"The Burning Index equation (page 12):\n\nbi = BurningIndex()\nequations(bi)","category":"section"},{"location":"nfdrs/#Ignition-Component","page":"NFDRS","title":"Ignition Component","text":"","category":"section"},{"location":"nfdrs/#Fire-Occurrence-Indices","page":"NFDRS","title":"Fire Occurrence Indices","text":"","category":"section"},{"location":"nfdrs/#Human-Caused-Fire-Occurrence-Index","page":"NFDRS","title":"Human-Caused Fire Occurrence Index","text":"","category":"section"},{"location":"nfdrs/#Lightning-Caused-Fire-Occurrence-Index","page":"NFDRS","title":"Lightning-Caused Fire Occurrence Index","text":"","category":"section"},{"location":"nfdrs/#Fire-Load-Index","page":"NFDRS","title":"Fire Load Index","text":"The Fire Load Index equation (page 14):\n\nfli = FireLoadIndex()\nequations(fli)","category":"section"},{"location":"nfdrs/#Fuel-Models","page":"NFDRS","title":"Fuel Models","text":"","category":"section"},{"location":"nfdrs/#Available-Fuel-Models","page":"NFDRS","title":"Available Fuel Models","text":"The NFDRS includes 20 fuel models representing different vegetation types:\n\nusing WildlandFire\n\nfor (code, model) in sort(collect(NFDRS_FUEL_MODELS), by=x->x[1])\n    println(\"$code: $(model.description) (depth: $(round(model.DEPTH, digits=3)) m)\")\nend","category":"section"},{"location":"nfdrs/#Fuel-Model-Parameters-Table-(Original-Units)","page":"NFDRS","title":"Fuel Model Parameters Table (Original Units)","text":"The following table reproduces the fuel model parameters from the Appendix of Cohen & Deeming (1985), page 15, in their original imperial units for reference. The implementation converts these to SI units automatically.\n\nModel Description SG1 (ft⁻¹) W1 (t/ac) SG10 W10 Depth (ft) MXD (%) HD (Btu/lb) SCM (ft/min) WNDFC\nA Western grasses (annual) 3000 0.20 109 0.0 0.80 15 8000 300 0.6\nB California chaparral 700 3.50 109 4.0 4.50 15 9500 58 0.5\nC Pine-grass savanna 2000 0.40 109 1.0 0.75 20 8000 32 0.4\nD Southern rough 1250 2.00 109 1.0 2.00 30 9000 25 0.4\nE Hardwood litter (winter) 2000 1.50 109 0.5 0.40 25 8000 25 0.4\nF Intermediate brush 700 2.50 109 2.0 4.50 15 9500 24 0.5\nG Short needle (heavy dead) 2000 2.50 109 2.0 1.00 25 8000 30 0.4\nH Short needle (normal dead) 2000 1.50 109 1.0 0.30 20 8000 8 0.4\nI Heavy slash 1500 12.0 109 12.0 2.00 25 8000 65 0.5\nJ Intermediate slash 1500 7.00 109 7.0 1.30 25 8000 44 0.5\nK Light slash 1500 2.50 109 2.5 0.60 25 8000 23 0.5\nL Western grasses (perennial) 2000 0.25 109 0.0 1.00 15 8000 178 0.6\nN Sawgrass 1600 1.50 109 3.0 3.00 25 8700 167 0.6\nO High pocosin 1500 2.00 109 1.0 4.00 30 9000 99 0.5\nP Southern pine plantation 1750 1.00 109 2.5 0.40 30 8000 14 0.4\nQ Alaskan black spruce 1500 2.00 109 0.5 3.00 25 8000 59 0.4\nR Hardwood litter (summer) 1500 0.50 109 0.5 0.25 25 8000 6 0.4\nS Tundra 1500 0.50 109 0.5 0.40 25 8000 17 0.6\nT Sagebrush-grass 2500 1.00 109 1.5 1.25 15 8000 73 0.6\nU Western pines 1750 1.50 109 1.0 0.50 20 8000 16 0.4\n\nNotes:\n\nSG1, SG10: Surface-area-to-volume ratio (ft⁻¹) → converted to m⁻¹ by multiplying by 3.28084\nW1, W10: Fuel loading (tons/acre) → converted to kg/m² by multiplying by 0.2241702\nMXD: Dead fuel moisture of extinction (percent) - unchanged\nHD: Heat of combustion (Btu/lb) → converted to J/kg by multiplying by 2326.0\nSCM: Spread component threshold (ft/min) → converted to m/s by multiplying by 0.00508\nWNDFC: Wind reduction factor (dimensionless) - unchanged","category":"section"},{"location":"nfdrs/#Analysis","page":"NFDRS","title":"Analysis","text":"This section validates the implementation against expected values from Cohen & Deeming (1985) and demonstrates the behavior of the NFDRS components.","category":"section"},{"location":"nfdrs/#EMC-Validation-(Eq.-1a,-1b,-1c,-page-1)","page":"NFDRS","title":"EMC Validation (Eq. 1a, 1b, 1c, page 1)","text":"The equilibrium moisture content equations calculate EMC based on temperature and relative humidity. The implementation uses SI units (temperature in Kelvin, RH as fraction 0-1).\n\nusing WildlandFire\nusing ModelingToolkit\nusing OrdinaryDiffEqDefault\nusing Plots\n\n# Create and compile the EMC system\nemc_sys = EquilibriumMoistureContent()\ncompiled_emc = mtkcompile(emc_sys)\n\n# Helper function to compute EMC for given temperature (°F) and RH (%)\nfunction compute_emc(temp_f, rh_pct)\n    # Convert °F to K: K = (°F + 459.67) × 5/9\n    temp_k = (temp_f + 459.67) * 5 / 9\n    rh_frac = rh_pct / 100.0\n\n    prob = ODEProblem(compiled_emc,\n        Dict(compiled_emc.TEMP => temp_k, compiled_emc.RH => rh_frac),\n        (0.0, 1.0))\n    sol = solve(prob)\n    return sol[compiled_emc.EMC][end] * 100  # Convert fraction to %\nend\n\n# Test cases from Cohen & Deeming (1985)\nprintln(\"EMC Validation at T=70°F:\")\nprintln(\"  RH=5% (Eq. 1a):  EMC = $(round(compute_emc(70.0, 5.0), digits=2))%\")\nprintln(\"  RH=30% (Eq. 1b): EMC = $(round(compute_emc(70.0, 30.0), digits=2))%\")\nprintln(\"  RH=80% (Eq. 1c): EMC = $(round(compute_emc(70.0, 80.0), digits=2))%\")\n\nThe following plot shows EMC as a function of relative humidity at 70°F, demonstrating the three humidity regimes:\n\nrh_range = 1:99\nemc_values = [compute_emc(70.0, rh) for rh in rh_range]\n\np = plot(rh_range, emc_values,\n    xlabel = \"Relative Humidity (%)\",\n    ylabel = \"EMC (%)\",\n    title = \"Equilibrium Moisture Content at 70°F\",\n    legend = false,\n    linewidth = 2)\n\n# Mark the regime boundaries\nvline!(p, [10, 50], linestyle=:dash, color=:gray, label=\"\")\nannotate!(p, [(5, 15, text(\"Eq. 1a\", 8)),\n              (30, 15, text(\"Eq. 1b\", 8)),\n              (75, 15, text(\"Eq. 1c\", 8))])\np","category":"section"},{"location":"nfdrs/#EMC-Temperature-Sensitivity","page":"NFDRS","title":"EMC Temperature Sensitivity","text":"EMC decreases with increasing temperature at constant humidity:\n\ntemps_f = 40:10:100\nrh_values = [30, 50, 70]\n\np = plot(xlabel = \"Temperature (°F)\",\n         ylabel = \"EMC (%)\",\n         title = \"EMC Temperature Sensitivity\",\n         legend = :topright)\n\nfor rh in rh_values\n    emc_vals = [compute_emc(t, rh) for t in temps_f]\n    plot!(p, temps_f, emc_vals, label=\"RH=$rh%\", linewidth=2)\nend\np","category":"section"},{"location":"nfdrs/#Burning-Index-Validation-(page-12)","page":"NFDRS","title":"Burning Index Validation (page 12)","text":"The Burning Index (BI) is calculated from the Spread Component and Energy Release Component:\n\nBI = 3.01 × (SC × ERC)^0.46\n\nwhere SC is in ft/min for the original equation.\n\nusing WildlandFire\nusing ModelingToolkit\nusing OrdinaryDiffEqDefault\nusing Plots\n\nbi_sys = BurningIndex()\ncompiled_bi = mtkcompile(bi_sys)\n\n# Conversion factor: m/s to ft/min\nFPM_TO_MS = 0.00508\n\n# Calculate BI for various SC and ERC combinations\nfunction compute_bi(sc_fpm, erc)\n    sc_ms = sc_fpm * FPM_TO_MS\n    prob = ODEProblem(compiled_bi,\n        Dict(compiled_bi.SC => sc_ms, compiled_bi.ERC => erc, compiled_bi.fuels_wet => 0.0),\n        (0.0, 1.0))\n    sol = solve(prob)\n    return sol[compiled_bi.BI][end]\nend\n\n# Validate at SC=50 ft/min, ERC=20\nexpected_bi = 3.01 * (50.0 * 20.0)^0.46\ncomputed_bi = compute_bi(50.0, 20.0)\nprintln(\"BI Validation:\")\nprintln(\"  SC=50 ft/min, ERC=20\")\nprintln(\"  Expected: $(round(expected_bi, digits=1))\")\nprintln(\"  Computed: $(round(computed_bi, digits=1))\")\n\nBI contour plot showing the relationship between SC, ERC, and fire behavior intensity:\n\nsc_range = 10:10:100\nerc_range = 5:5:50\nbi_matrix = [compute_bi(sc, erc) for erc in erc_range, sc in sc_range]\n\ncontourf(sc_range, erc_range, bi_matrix,\n    xlabel = \"Spread Component (ft/min)\",\n    ylabel = \"Energy Release Component\",\n    title = \"Burning Index\",\n    colorbar_title = \"BI\",\n    levels = 10)","category":"section"},{"location":"nfdrs/#Fire-Load-Index-Validation-(page-14)","page":"NFDRS","title":"Fire Load Index Validation (page 14)","text":"The Fire Load Index combines the Burning Index with fire occurrence indices:\n\nFLI = 0.71 × √(BI² + (LOI + MCOI)²)\n\nusing WildlandFire\nusing ModelingToolkit\nusing OrdinaryDiffEqDefault\n\nfli_sys = FireLoadIndex()\ncompiled_fli = mtkcompile(fli_sys)\n\n# Test case from Cohen & Deeming (1985)\nprob = ODEProblem(compiled_fli,\n    Dict(compiled_fli.BI => 50.0, compiled_fli.LOI => 30.0, compiled_fli.MCOI => 20.0),\n    (0.0, 1.0))\nsol = solve(prob)\ncomputed_fli = sol[compiled_fli.FLI][end]\nexpected_fli = 0.71 * sqrt(50.0^2 + (30.0 + 20.0)^2)\n\nprintln(\"FLI Validation:\")\nprintln(\"  BI=50, LOI=30, MCOI=20\")\nprintln(\"  Expected: $(round(expected_fli, digits=1))\")\nprintln(\"  Computed: $(round(computed_fli, digits=1))\")","category":"section"},{"location":"nfdrs/#Fuel-Model-Comparison","page":"NFDRS","title":"Fuel Model Comparison","text":"Different fuel models have varying fuel bed depths and loadings, affecting fire behavior:\n\nusing WildlandFire\nusing Plots\n\nmodels = collect(values(NFDRS_FUEL_MODELS))\nsort!(models, by=m -> m.DEPTH)\n\np = bar([string(m.name) for m in models], [m.DEPTH for m in models],\n    xlabel = \"Fuel Model\",\n    ylabel = \"Fuel Bed Depth (m)\",\n    title = \"NFDRS Fuel Model Bed Depths (Cohen & Deeming 1985, Appendix)\",\n    legend = false,\n    rotation = 45)\np","category":"section"},{"location":"nfdrs/#Dead-Fuel-Loading-Comparison","page":"NFDRS","title":"Dead Fuel Loading Comparison","text":"Comparison of total dead fuel loadings (1-hr + 10-hr + 100-hr) across different NFDRS fuel models:\n\nusing WildlandFire\nusing Plots\n\nmodels = collect(values(NFDRS_FUEL_MODELS))\nsort!(models, by=m -> m.W1 + m.W10 + m.W100)\n\n# Total dead fuel loading (1-hr + 10-hr + 100-hr)\ndead_loading = [m.W1 + m.W10 + m.W100 for m in models]\n\np = bar([string(m.name) for m in models], dead_loading,\n    xlabel = \"Fuel Model\",\n    ylabel = \"Dead Fuel Loading (kg/m²)\",\n    title = \"NFDRS Dead Fuel Loading by Model\",\n    legend = false,\n    rotation = 45)\np","category":"section"},{"location":"nfdrs/#Heat-Content-Comparison","page":"NFDRS","title":"Heat Content Comparison","text":"Different fuel models have varying heat content values reflecting their chemical composition:\n\nmodels = collect(values(NFDRS_FUEL_MODELS))\nsort!(models, by=m -> m.HD)\n\np = bar([string(m.name) for m in models], [m.HD / 1e6 for m in models],\n    xlabel = \"Fuel Model\",\n    ylabel = \"Heat of Combustion (MJ/kg)\",\n    title = \"NFDRS Dead Fuel Heat Content\",\n    legend = false,\n    rotation = 45,\n    ylims = (17, 23))\np","category":"section"},{"location":"nfdrs/#Fuel-Loading-Transfer-2","page":"NFDRS","title":"Fuel Loading Transfer","text":"The fuel loading transfer model (Eq. 5-8) calculates the fraction of herbaceous fuel that behaves as dead fuel based on the herbaceous moisture content:\n\nusing WildlandFire\nusing ModelingToolkit\nusing OrdinaryDiffEqDefault\nusing Plots\n\nflt_sys = FuelLoadingTransfer()\ncompiled_flt = mtkcompile(flt_sys)\n\n# Calculate FCTCUR across the moisture range\nfunction compute_fctcur(mcherb_frac)\n    prob = ODEProblem(compiled_flt,\n        Dict(compiled_flt.MCHERB => mcherb_frac,\n             compiled_flt.W1 => 0.05,\n             compiled_flt.WHERB => 0.02),\n        (0.0, 1.0))\n    sol = solve(prob)\n    return sol[compiled_flt.FCTCUR][end]\nend\n\nmcherb_range = 0.30:0.01:1.30\nfctcur_values = [compute_fctcur(mc) for mc in mcherb_range]\n\nplot(mcherb_range .* 100, fctcur_values .* 100,\n    xlabel = \"Herbaceous Moisture Content (%)\",\n    ylabel = \"Fraction Transferred to Dead (%)\",\n    title = \"Fuel Loading Transfer (Eq. 5)\",\n    legend = false,\n    linewidth = 2)","category":"section"},{"location":"nfdrs/#WildlandFire.EquilibriumMoistureContent","page":"NFDRS","title":"WildlandFire.EquilibriumMoistureContent","text":"EquilibriumMoistureContent(; name=:EquilibriumMoistureContent)\n\nCalculate equilibrium moisture content (EMC) from temperature and relative humidity.\n\nBased on regression equations developed by Simard (1968) from Wood Handbook tables. EMC is expressed as fraction moisture content (dimensionless).\n\nImplements Equations 1a, 1b, 1c from Cohen & Deeming (1985), page 1.\n\nParameters\n\nTEMP: Dry bulb temperature (K)\nRH: Relative humidity (dimensionless, 0-1)\n\nVariables\n\nEMC: Equilibrium moisture content (dimensionless)\n\n\n\n\n\n","category":"function"},{"location":"nfdrs/#WildlandFire.OneHourFuelMoisture","page":"NFDRS","title":"WildlandFire.OneHourFuelMoisture","text":"OneHourFuelMoisture(; name=:OneHourFuelMoisture)\n\nCalculate 1-hour timelag fuel moisture content.\n\nThe response of 1-hour timelag fuels to environmental changes is so rapid that only the potential moisture content (equivalent to EMC at fuel-atmosphere interface) is required.\n\nFrom Cohen & Deeming (1985), page 3:\n\nWhen fuel moisture sticks are not used: MC1 = 1.03 × EMCPRM\nWhen fuel moisture sticks are used: MC1 = (4.0 × EMCPRM + MC10) / 5.0\nIf raining at observation time: MC1 = 35%\n\nParameters\n\nEMCPRM: EMC at fuel-atmosphere interface (dimensionless)\nMC10: 10-hour fuel moisture content (dimensionless), used when fuel sticks are used\nuse_fuel_sticks: Flag (1 if fuel sticks used, 0 otherwise) (dimensionless)\nis_raining: Flag (1 if raining, 0 otherwise) (dimensionless)\n\nVariables\n\nMC1: 1-hour fuel moisture content (dimensionless)\n\n\n\n\n\n","category":"function"},{"location":"nfdrs/#WildlandFire.TenHourFuelMoisture","page":"NFDRS","title":"WildlandFire.TenHourFuelMoisture","text":"TenHourFuelMoisture(; name=:TenHourFuelMoisture)\n\nCalculate 10-hour timelag fuel moisture content.\n\nFrom Cohen & Deeming (1985), page 4:\n\nWithout fuel sticks: MC10 = 1.28 × EMCPRM\nWith fuel sticks: MC10 = AA×CC + BB×CC×(WT - 100.0) where age correction factors are based on Haines and Frost (1978):\nAA = 0.5 × AGE / 30.0\nBB = 1.0 + (0.02 × AGE / 30.0)\nCC = CLIMAT / 4.0\n\nParameters\n\nEMCPRM: EMC at fuel-atmosphere interface (dimensionless)\nuse_fuel_sticks: Flag (1 if fuel sticks used, 0 otherwise) (dimensionless)\nWT: Weight of fuel sticks (kg)\nAGE: Days since sticks were set out (dimensionless)\nCLIMAT: NFDRS climate class 1-4 (dimensionless)\n\nVariables\n\nMC10: 10-hour fuel moisture content (dimensionless)\n\n\n\n\n\n","category":"function"},{"location":"nfdrs/#WildlandFire.HundredHourFuelMoisture","page":"NFDRS","title":"WildlandFire.HundredHourFuelMoisture","text":"HundredHourFuelMoisture(; name=:HundredHourFuelMoisture)\n\nCalculate 100-hour timelag fuel moisture content using daily discrete update.\n\nUses weighted 24-hour average EMC (EMCBAR) based on hours of daylight. The moisture content responds to the boundary condition with a response coefficient.\n\nFrom Cohen & Deeming (1985), page 4-5:\n\nEMCBAR = (DAYLIT × EMCMIN + (24 - DAYLIT) × EMCMAX) / 24\nBNDRYH = ((24 - PPTDUR) × EMCBAR + PPTDUR × (0.5×PPTDUR + 41)) / 24\nMC100 = YMC100 + (BNDRYH - YMC100) × (1.0 - 0.87 × exp(-0.24))\n\nParameters\n\nEMCMIN: EMC at max temp/min RH (dimensionless)\nEMCMAX: EMC at min temp/max RH (dimensionless)\nPPTDUR: Duration of precipitation (s)\nLAT: Station latitude (rad)\nJDATE: Julian day of year 1-366 (dimensionless)\nYMC100: Previous day's MC100 value (dimensionless)\n\nVariables\n\nMC100: 100-hour fuel moisture content (dimensionless)\nEMCBAR: Weighted 24-hour average EMC (dimensionless)\nBNDRYH: Weighted 24-hour average boundary condition (dimensionless)\n\n\n\n\n\n","category":"function"},{"location":"nfdrs/#WildlandFire.ThousandHourFuelMoisture","page":"NFDRS","title":"WildlandFire.ThousandHourFuelMoisture","text":"ThousandHourFuelMoisture(; name=:ThousandHourFuelMoisture)\n\nCalculate 1000-hour timelag fuel moisture content using daily discrete update.\n\nUses 7-day running average of boundary conditions (BDYBAR). From Cohen & Deeming (1985), page 5:\n\nBNDRYT = ((24 - PPTDUR) × EMCBAR + PPTDUR × (2.7×PPTDUR + 76)) / 24\nMC1000 = PM1000 + (BDYBAR - PM1000) × (1.0 - 0.82 × exp(-0.168))\n\nNote: In the original NFDRS, BNDRYT is calculated daily but BDYBAR and MC1000 are calculated only every seventh day. This implementation calculates daily with the running average provided as a parameter.\n\nParameters\n\nEMCBAR: Weighted 24-hour average EMC (dimensionless)\nPPTDUR: Duration of precipitation (s)\nBDYBAR: 7-day running average boundary condition (dimensionless)\nPM1000: Previous MC1000 value (dimensionless) - MC1000 from 7 days ago in original NFDRS\n\nVariables\n\nMC1000: 1000-hour fuel moisture content (dimensionless)\nBNDRYT: Weighted 24-hour average boundary condition for 1000-hr (dimensionless)\n\n\n\n\n\n","category":"function"},{"location":"nfdrs/#WildlandFire.HerbaceousFuelMoisture","page":"NFDRS","title":"WildlandFire.HerbaceousFuelMoisture","text":"HerbaceousFuelMoisture(; name=:HerbaceousFuelMoisture)\n\nCalculate herbaceous fuel moisture content (MCHERB).\n\nThe model tracks five stages: pregreen, greenup, green, transition, and cured/frozen. MCHERB is a function of X1000 (modified 1000-hr moisture), herbaceous type (annual/perennial), and NFDRS climate class.\n\nFrom Cohen & Deeming (1985), pages 6-8:\n\nGreenup: MCHERB = MCHRBI + (MCHRBP - MCHRBI) × GREN\nGreen: MCHERB = HERBGA + HERBGB × X1000\nTransition (annuals): MCHERB = ANNTA + ANNTB × X1000\nTransition (perennials): MCHERB = PERTA + PERTB × X1000\n\nClimate-dependent parameters (page 7): | Climate | HERBGA | HERBGB | ANNTA  | ANNTB | PERTA | PERTB | |––––-|––––|––––|––––|–––-|–––-|–––-| | 1       | -70.0  | 12.8   | -150.5 | 18.4  | 11.2  | 7.4   | | 2       | -100.0 | 14.0   | -187.7 | 19.6  | -10.3 | 8.3   | | 3       | -137.5 | 15.5   | -245.2 | 22.0  | -42.7 | 9.8   | | 4       | -185.0 | 17.4   | -305.2 | 24.3  | -93.5 | 12.2  |\n\nParameters\n\nX1000: Modified 1000-hr moisture for herbaceous model (dimensionless)\nMC1: 1-hour fuel moisture content (dimensionless)\nCLIMAT: NFDRS climate class 1-4 (dimensionless)\nis_annual: Flag: 1 if annual, 0 if perennial (dimensionless)\nGRNDAY: Days since greenup started (dimensionless)\nis_greenup: Flag: 1 if in greenup, 0 otherwise (dimensionless)\nis_cured: Flag: 1 if cured/frozen, 0 otherwise (dimensionless)\n\nVariables\n\nMCHERB: Herbaceous fuel moisture content (dimensionless)\n\n\n\n\n\n","category":"function"},{"location":"nfdrs/#WildlandFire.WoodyFuelMoisture","page":"NFDRS","title":"WildlandFire.WoodyFuelMoisture","text":"WoodyFuelMoisture(; name=:WoodyFuelMoisture)\n\nCalculate woody shrub fuel moisture content (MCWOOD).\n\nThe model has four stages: pregreen, greenup, green, and frozen. MCWOOD is a function of MC1000 and NFDRS climate class.\n\nFrom Cohen & Deeming (1985), pages 8-9:\n\nPregreen: MCWOOD = PREGRN\nGreenup: MCWOOD = MCWODI + (MCWODP - MCWODI) × GREN\nGreen: MCWOOD = WOODGA + WOODGB × MC1000\n\nClimate-dependent parameters (page 8): | Climate | PREGRN | WOODGA | WOODGB | |––––-|––––|––––|––––| | 1       | 50%    | 12.5   | 7.5    | | 2       | 60%    | -5.0   | 8.2    | | 3       | 70%    | -22.5  | 8.9    | | 4       | 80%    | -45.0  | 9.8    |\n\nParameters\n\nMC1000: 1000-hour fuel moisture content (dimensionless)\nCLIMAT: NFDRS climate class 1-4 (dimensionless)\nGRNDAY: Days since greenup started (dimensionless)\nis_greenup: Flag: 1 if in greenup, 0 otherwise (dimensionless)\nis_frozen: Flag: 1 if frozen/dormant, 0 otherwise (dimensionless)\n\nVariables\n\nMCWOOD: Woody fuel moisture content (dimensionless)\n\n\n\n\n\n","category":"function"},{"location":"nfdrs/#WildlandFire.FuelLoadingTransfer","page":"NFDRS","title":"WildlandFire.FuelLoadingTransfer","text":"FuelLoadingTransfer(; name=:FuelLoadingTransfer)\n\nCalculate the transfer of herbaceous fuel loading to 1-hour dead fuel class based on herbaceous moisture content (curing).\n\nImplements Equations 5, 6, 7, 8 from Cohen & Deeming (1985), page 7:\n\nEq. 5: FCTCUR = 1.33 - 0.0111 × MCHERB (where MCHERB in percent)\nEq. 6: WHERBC = FCTCUR × WHERB\nEq. 7: W1P = W1 + WHERBC\nEq. 8: WHERBP = WHERB - WHERBC\n\nParameters\n\nMCHERB: Herbaceous fuel moisture content (dimensionless)\nW1: Base 1-hour fuel loading (kg/m²)\nWHERB: Herbaceous fuel loading (kg/m²)\n\nVariables\n\nFCTCUR: Fraction transferred to 1-hour class (dimensionless)\nWHERBC: Herbaceous loading transferred (kg/m²)\nW1P: Effective 1-hour fuel loading (kg/m²)\nWHERBP: Remaining herbaceous loading (kg/m²)\n\n\n\n\n\n","category":"function"},{"location":"nfdrs/#WildlandFire.SpreadComponent","page":"NFDRS","title":"WildlandFire.SpreadComponent","text":"SpreadComponent(; name=:SpreadComponent)\n\nCalculate the NFDRS Spread Component (SC) based on Rothermel's fire spread model.\n\nThe SC is the forward rate of spread of the flaming front in m/s. Implements equations from pages 9-11 of Cohen & Deeming (1985).\n\nBased on Rothermel (1972) as modified by Albini (1976).\n\nParameters\n\nFuel loadings (kg/m²):\n\nW1P: 1-hour fuel loading (including transferred herbaceous)\nW10: 10-hour fuel loading\nW100: 100-hour fuel loading\nWHERBP: Remaining herbaceous loading\nWWOOD: Woody fuel loading\n\nSurface-area-to-volume ratios (m⁻¹):\n\nSG1, SG10, SG100: Dead fuel SAV ratios\nSGHERB, SGWOOD: Live fuel SAV ratios\n\nOther parameters:\n\nMC1, MC10, MC100: Dead fuel moisture contents (dimensionless)\nMCHERB, MCWOOD: Live fuel moisture contents (dimensionless)\nMXD: Dead fuel moisture of extinction (percent)\nHD, HL: Heat of combustion (J/kg) for dead and live fuels\nDEPTH: Fuel bed depth (m)\nWS: 20-ft windspeed (m/s)\nWNDFC: Wind reduction factor (dimensionless)\nslope_class: NFDRS slope class 1-5 (dimensionless)\nfuels_wet: Flag: 1 if fuels wet or snow-covered (dimensionless)\n\nVariables\n\nSC: Spread component (m/s)\nROS: Rate of spread (m/s)\nIR: Reaction intensity (W/m²)\n\n\n\n\n\n","category":"function"},{"location":"nfdrs/#WildlandFire.EnergyReleaseComponent","page":"NFDRS","title":"WildlandFire.EnergyReleaseComponent","text":"EnergyReleaseComponent(; name=:EnergyReleaseComponent)\n\nCalculate the NFDRS Energy Release Component (ERC).\n\nERC is based on loading-weighted (not surface-area-weighted) calculations. It represents the available energy release per unit area.\n\nImplements equations from pages 11-12 of Cohen & Deeming (1985).\n\nThe 0.04 scaling factor has units ft²/Btu, so a unit value of ERC is equivalent to 25 Btu of available energy per square foot (page 12).\n\nParameters\n\nSame as SpreadComponent, plus:\n\nW1000: 1000-hour fuel loading (kg/m²)\nSG1000: 1000-hour fuel SAV ratio (m⁻¹)\nMC1000: 1000-hour fuel moisture (dimensionless)\n\nVariables\n\nERC: Energy release component (dimensionless)\nIRE: Loading-weighted reaction intensity (W/m²)\n\n\n\n\n\n","category":"function"},{"location":"nfdrs/#WildlandFire.BurningIndex","page":"NFDRS","title":"WildlandFire.BurningIndex","text":"BurningIndex(; name=:BurningIndex)\n\nCalculate the NFDRS Burning Index (BI).\n\nBI is numerically equivalent to 10 times the predicted flame length in feet, based on Byram's flame length model (Byram 1959).\n\nFrom Cohen & Deeming (1985), page 12:\n\nFL = 0.45 × I^0.46 (Byram's equation, FL in ft, I in Btu/ft/s)\nI = (ROS/60) × IRE × TAU = SC × 25 × ERC (after substitution)\nFL = 0.301 × (SC × ERC)^0.46\nBI = 10 × FL = 3.01 × (SC × ERC)^0.46\n\nParameters\n\nSC: Spread component (m/s)\nERC: Energy release component (dimensionless)\nfuels_wet: Flag: 1 if fuels wet or snow-covered (dimensionless)\n\nVariables\n\nBI: Burning index (dimensionless)\n\n\n\n\n\n","category":"function"},{"location":"nfdrs/#WildlandFire.IgnitionComponent","page":"NFDRS","title":"WildlandFire.IgnitionComponent","text":"IgnitionComponent(; name=:IgnitionComponent)\n\nCalculate the NFDRS Ignition Component (IC).\n\nFrom Cohen & Deeming (1985), pages 12-13:\n\nIC = 0.10 × P(I) × P(F/I)\n\nP(I) is the probability of ignition, scaled to be 100 at MC1=1.5% and 0 at MC1=25%. P(F/I) is the probability of a reportable fire given ignition.\n\nThe heat of ignition (QIGN) equation is from page 13: QIGN = 144.5 - 0.266×T - 0.00058×T² - 0.01×T×MC1 + 18.54×(1-exp(-0.151×MC1)) + 6.4×MC1 where T is in °C and MC1 is in percent.\n\nParameters\n\nTMPPRM: Temperature at fuel-atmosphere interface (K)\nMC1: 1-hour fuel moisture content (dimensionless)\nSC: Spread component (m/s)\nSCM: Spread component threshold for reportable fires (m/s)\n\nVariables\n\nIC: Ignition component (0-100, dimensionless)\n\n\n\n\n\n","category":"function"},{"location":"nfdrs/#WildlandFire.HumanFireOccurrenceIndex","page":"NFDRS","title":"WildlandFire.HumanFireOccurrenceIndex","text":"HumanFireOccurrenceIndex(; name=:HumanFireOccurrenceIndex)\n\nCalculate the Human-Caused Fire Occurrence Index (MCOI).\n\nFrom Cohen & Deeming (1985), page 14: MCOI = 0.01 × MRISK × IC\n\nThe man-caused fire occurrence index relates the ignition component to human-caused fire risk, which is typically derived from historical fire occurrence data.\n\nParameters\n\nMRISK: Human-caused risk 0-100 (dimensionless)\nIC: Ignition component 0-100 (dimensionless)\n\nVariables\n\nMCOI: Human-caused fire occurrence index 0-100 (dimensionless)\n\n\n\n\n\n","category":"function"},{"location":"nfdrs/#WildlandFire.LightningFireOccurrenceIndex","page":"NFDRS","title":"WildlandFire.LightningFireOccurrenceIndex","text":"LightningFireOccurrenceIndex(; name=:LightningFireOccurrenceIndex)\n\nCalculate the Lightning-Caused Fire Occurrence Index (LOI).\n\nThe model assumes a thunderstorm traversing an area forms a corridor aligned with the storm's track that receives both rain and lightning. Flanking the rain-lightning corridor on both sides are areas subjected to lightning only.\n\nImplements equations from pages 13-14 of Cohen & Deeming (1985).\n\nParameters\n\nLAL: NFDRS Lightning Activity Level (1-6)\nIC: Ignition component (0-100)\nMC1: 1-hour fuel moisture content (dimensionless)\nLRSF: Lightning risk scaling factor (site-specific)\nYLOI: Previous day's LOI (for carry-over fires)\nSTMSPD: Storm translational speed (m/s)\nis_raining: Flag (1 if raining at observation time, 0 otherwise)\nis_lightning: Flag (1 if lightning occurring, 0 otherwise)\n\nVariables\n\nLOI: Lightning-caused fire occurrence index (0-100)\nLRISK: Lightning risk\n\n\n\n\n\n","category":"function"},{"location":"nfdrs/#WildlandFire.FireLoadIndex","page":"NFDRS","title":"WildlandFire.FireLoadIndex","text":"FireLoadIndex(; name=:FireLoadIndex)\n\nCalculate the Fire Load Index (FLI).\n\nFrom Cohen & Deeming (1985), page 14: FLI = 0.71 × √(BI² + (LOI + MCOI)²)\n\nFLI combines the Burning Index with fire occurrence indexes to provide a comprehensive measure of the expected fire load.\n\nParameters\n\nBI: Burning index 0-100 (dimensionless)\nLOI: Lightning fire occurrence index 0-100 (dimensionless)\nMCOI: Human-caused fire occurrence index 0-100 (dimensionless)\n\nVariables\n\nFLI: Fire load index 0-100 (dimensionless)\n\n\n\n\n\n","category":"function"},{"location":"nfdrs/#WildlandFire.NFDRSFuelModel","page":"NFDRS","title":"WildlandFire.NFDRSFuelModel","text":"NFDRSFuelModel\n\nFuel model parameters for the National Fire Danger Rating System. Uses NamedTuple for lightweight, immutable storage of fuel model parameters.\n\nAll values in SI units:\n\nFuel loadings: kg/m²\nSAV ratios: m⁻¹\nDepth: m\nMoisture of extinction: percent (same as original)\nHeat of combustion: J/kg\nSCM (spread component threshold): m/s\nWNDFC: dimensionless\n\nParameters converted from Cohen & Deeming (1985), Appendix (page 15).\n\n\n\n\n\n","category":"type"},{"location":"nfdrs/#WildlandFire.NFDRS_FUEL_MODELS","page":"NFDRS","title":"WildlandFire.NFDRS_FUEL_MODELS","text":"NFDRS_FUEL_MODELS\n\nDictionary of all 20 NFDRS fuel models (A-U, excluding M).\n\nParameters converted to SI units from Cohen & Deeming (1985), Appendix (page 15).\n\n\n\n\n\n","category":"constant"},{"location":"nfdrs/#WildlandFire.get_fuel_model","page":"NFDRS","title":"WildlandFire.get_fuel_model","text":"get_fuel_model(model::Symbol)\n\nGet a fuel model by its symbol identifier (A-U).\n\nReturns a NamedTuple with all fuel model parameters in SI units.\n\nExample\n\nfm = get_fuel_model(:A)  # Western grasses (annual)\nfm.SG1  # 9842.52 (m⁻¹)\nfm.W1   # 0.0448 (kg/m²)\n\n\n\n\n\n","category":"function"},{"location":"nfdrs/#WildlandFire.fuel_loading_to_kg_per_sqm","page":"NFDRS","title":"WildlandFire.fuel_loading_to_kg_per_sqm","text":"fuel_loading_to_kg_per_sqm(tons_per_acre)\n\nConvert fuel loading from tons/acre to kg/m² (SI units).\n\nThe conversion factor is 0.2241702 (kg·acre)/(ton·m²).\n\n\n\n\n\n","category":"function"},{"location":"nfdrs/#WildlandFire.fuel_loading_to_lb_per_sqft","page":"NFDRS","title":"WildlandFire.fuel_loading_to_lb_per_sqft","text":"fuel_loading_to_lb_per_sqft(tons_per_acre)\n\nDEPRECATED: Use fuel_loading_to_kg_per_sqm instead.\n\nConvert fuel loading from tons/acre to lb/ft² (old NFDRS internal units).\n\n\n\n\n\n","category":"function"},{"location":"#WildlandFire.jl","page":"Home","title":"WildlandFire.jl","text":"WildlandFire.jl provides ModelingToolkit.jl-based equation systems for wildland fire behavior modeling. The package is part of the EarthSciML ecosystem.","category":"section"},{"location":"#Features","page":"Home","title":"Features","text":"Rothermel Surface Fire Spread Model: Semi-empirical model for predicting fire spread rates\nDynamic Fuel Load Transfer: Load transfer from live to dead herbaceous fuel based on curing\nLive Fuel Moisture of Extinction: Calculation of live fuel extinction moisture\nRelated Fire Behavior Models: Flame length, fireline intensity, residence time\nNational Fire Danger Rating System (NFDRS): Fuel moisture and fire danger assessment\nFuel Moisture Models: Dead fuel moisture (1-hr, 10-hr, 100-hr, 1000-hr timelag classes) and live fuel moisture (herbaceous and woody)\nFire Behavior Indices: Spread Component, Energy Release Component, Burning Index\nFire Occurrence Indices: Ignition Component, Human-Caused Fire Occurrence Index, Fire Load Index\nFuel Model Database: All 20 NFDRS fuel models (A-U, excluding M) with vegetation-specific parameters","category":"section"},{"location":"#Installation","page":"Home","title":"Installation","text":"using Pkg\nPkg.add(url=\"https://github.com/EarthSciML/WildlandFire.jl\")","category":"section"},{"location":"#Quick-Start","page":"Home","title":"Quick Start","text":"","category":"section"},{"location":"#Rothermel-Fire-Spread","page":"Home","title":"Rothermel Fire Spread","text":"using WildlandFire\nusing ModelingToolkit\nusing NonlinearSolve\n\n# Create the Rothermel fire spread system\nsys = RothermelFireSpread()\ncompiled_sys = mtkcompile(sys)\n\n# Set parameters for short grass (Fuel Model 1) in SI units\n# Original US values: σ=3500 1/ft, w0=0.034 lb/ft², δ=1.0 ft, U=440 ft/min (5 mi/h)\nprob = NonlinearProblem(compiled_sys, Dict(\n    compiled_sys.σ => 11483.5,     # SAV ratio (1/m), converted from 3500 1/ft\n    compiled_sys.w0 => 0.166,      # Fuel load (kg/m²), converted from 0.034 lb/ft²\n    compiled_sys.δ => 0.3048,      # Fuel bed depth (m), converted from 1.0 ft\n    compiled_sys.Mx => 0.12,       # Moisture of extinction (dimensionless)\n    compiled_sys.Mf => 0.05,       # Fuel moisture content (dimensionless)\n    compiled_sys.U => 2.235,       # Wind speed (m/s), converted from 5 mi/h\n    compiled_sys.tanϕ => 0.0       # Flat terrain\n))\nsol = solve(prob)\n\n# Get results in SI units\nprintln(\"Rate of spread: \", sol[compiled_sys.R], \" m/s\")\nprintln(\"Flame length: \", sol[compiled_sys.F_L], \" m\")","category":"section"},{"location":"#NFDRS-Fire-Danger-Rating","page":"Home","title":"NFDRS Fire Danger Rating","text":"using WildlandFire\nusing ModelingToolkit\n\n# Create an equilibrium moisture content model\nemc = EquilibriumMoistureContent()\n\n# Get fuel model parameters\nfuel_model_a = get_fuel_model(:A)  # Western grasses (annual)\n\n# Create a burning index model\nbi = BurningIndex()","category":"section"},{"location":"#Contents","page":"Home","title":"Contents","text":"Pages = [\"nfdrs.md\", \"rothermel.md\"]\nDepth = 2","category":"section"},{"location":"#Module-Documentation","page":"Home","title":"Module Documentation","text":"","category":"section"},{"location":"#Index","page":"Home","title":"Index","text":"","category":"section"},{"location":"#WildlandFire.WildlandFire","page":"Home","title":"WildlandFire.WildlandFire","text":"WildlandFire\n\nWildland fire modeling components for EarthSciML, including:\n\nRothermel surface fire spread model\nNational Fire Danger Rating System (NFDRS) fuel moisture and fire behavior models\n\n\n\n\n\n","category":"module"},{"location":"rothermel/#Rothermel-Surface-Fire-Spread-Model","page":"Rothermel Fire Spread Model","title":"Rothermel Surface Fire Spread Model","text":"","category":"section"},{"location":"rothermel/#Overview","page":"Rothermel Fire Spread Model","title":"Overview","text":"The Rothermel surface fire spread model is a semi-empirical model that predicts the rate of spread of surface fires in wildland fuels. Developed by Richard C. Rothermel in 1972, it remains one of the most widely used fire behavior models in the United States.\n\nThe model calculates fire spread rate based on a heat source/heat sink balance:\n\nHeat source: Energy released by the fire (reaction intensity) modified by wind and slope\nHeat sink: Energy required to raise fuel ahead of the fire to ignition temperature\n\nReference: Andrews, Patricia L. 2018. The Rothermel surface fire spread model and associated developments: A comprehensive explanation. Gen. Tech. Rep. RMRS-GTR-371. Fort Collins, CO: U.S. Department of Agriculture, Forest Service, Rocky Mountain Research Station. 121 p.","category":"section"},{"location":"rothermel/#Implementation","page":"Rothermel Fire Spread Model","title":"Implementation","text":"The Rothermel model is implemented as a ModelingToolkit.jl algebraic system. The main function RothermelFireSpread() creates a system with 26 equations representing all intermediate calculations and output variables.","category":"section"},{"location":"rothermel/#Important-Note-on-Units","page":"Rothermel Fire Spread Model","title":"Important Note on Units","text":"This implementation uses SI units throughout. The original Rothermel equations were calibrated in US customary units (ft, lb, Btu), so all empirical coefficients have been converted to SI. Key conversions from the original formulation:\n\nQuantity US Customary SI Equivalent\nLoad 1 lb/ft² 4.88 kg/m²\nLoad 1 ton/acre 0.224 kg/m²\nWind speed 1 mi/h 0.447 m/s\nWind speed 1 ft/min 0.00508 m/s\nEnergy 1 Btu 1.055 kJ\nLength 1 ft 0.305 m\nMass 1 lb 0.454 kg\nSAV ratio 1 1/ft 3.28 1/m\nDensity 1 lb/ft³ 16.02 kg/m³\nHeat content 1 Btu/lb 2326 J/kg\nPower flux 1 Btu/ft²/min 189.3 W/m²","category":"section"},{"location":"rothermel/#State-Variables","page":"Rothermel Fire Spread Model","title":"State Variables","text":"using DataFrames, ModelingToolkit, Symbolics, DynamicQuantities\nusing WildlandFire\n\nsys = RothermelFireSpread()\nvars = unknowns(sys)\nunits = [ModelingToolkit.get_unit(v) for v in vars]\nDataFrame(\n    :Name => [string(Symbolics.tosymbol(v, escape = false)) for v in vars],\n    :Units => [isnothing(u) ? \"dimensionless\" : string(u) for u in units],\n    :Description => [ModelingToolkit.getdescription(v) for v in vars]\n)","category":"section"},{"location":"rothermel/#Parameters","page":"Rothermel Fire Spread Model","title":"Parameters","text":"params = parameters(sys)\npunits = [ModelingToolkit.get_unit(p) for p in params]\nDataFrame(\n    :Name => [string(Symbolics.tosymbol(p, escape = false)) for p in params],\n    :Units => [isnothing(u) ? \"dimensionless\" : string(u) for u in punits],\n    :Description => [ModelingToolkit.getdescription(p) for p in params]\n)","category":"section"},{"location":"rothermel/#Equations","page":"Rothermel Fire Spread Model","title":"Equations","text":"equations(sys)","category":"section"},{"location":"rothermel/#Main-Equations","page":"Rothermel Fire Spread Model","title":"Main Equations","text":"The fundamental rate of spread equation is:\n\nR = fracI_R cdot xi cdot (1 + phi_w + phi_s)rho_b cdot varepsilon cdot Q_ig\n\nWhere:\n\nI_R = Reaction intensity\nxi = Propagating flux ratio\nphi_w = Wind factor\nphi_s = Slope factor\nrho_b = Bulk density\nvarepsilon = Effective heating number\nQ_ig = Heat of preignition","category":"section"},{"location":"rothermel/#Analysis","page":"Rothermel Fire Spread Model","title":"Analysis","text":"","category":"section"},{"location":"rothermel/#Example:-Fire-Spread-Under-Different-Conditions","page":"Rothermel Fire Spread Model","title":"Example: Fire Spread Under Different Conditions","text":"using WildlandFire\nusing ModelingToolkit\nusing NonlinearSolve\nusing Plots\n\n# Create the Rothermel system\nsys = RothermelFireSpread()\ncompiled_sys = mtkcompile(sys)\n\n# Unit conversion factors\nft_to_m = 0.3048\nlb_to_kg = 0.453592\nlbft2_to_kgm2 = lb_to_kg / ft_to_m^2\ninvft_to_invm = 1 / ft_to_m\nftmin_to_ms = ft_to_m / 60.0\n\n# Fuel Model 1 parameters (short grass) converted to SI\n# Original US: σ = 3500 1/ft, w0 = 0.034 lb/ft², δ = 1.0 ft, Mx = 0.12\nbase_params = Dict(\n    compiled_sys.σ => 3500.0 * invft_to_invm,      # SAV ratio (1/m)\n    compiled_sys.w0 => 0.034 * lbft2_to_kgm2,      # Fuel load (kg/m²)\n    compiled_sys.δ => 1.0 * ft_to_m,               # Fuel bed depth (m)\n    compiled_sys.Mx => 0.12,                        # Moisture of extinction\n    compiled_sys.Mf => 0.05,                        # Fuel moisture content\n    compiled_sys.tanϕ => 0.0                        # Flat terrain\n)\n\n# Calculate spread rate for different wind speeds\n# Wind speeds from 0 to ~6 mi/h in m/s\nwind_speeds_ms = [U * ftmin_to_ms for U in 0:50:500]\nspread_rates = Float64[]\n\nfor U in wind_speeds_ms\n    prob = NonlinearProblem(compiled_sys, merge(base_params, Dict(compiled_sys.U => U)))\n    sol = solve(prob)\n    push!(spread_rates, sol[compiled_sys.R])\nend\n\n# Plot results (convert wind to mi/h and spread rate to ft/min for familiar units)\nplot(wind_speeds_ms ./ 0.447,  # Convert m/s to mi/h\n     spread_rates ./ ftmin_to_ms,  # Convert m/s to ft/min\n     xlabel = \"Wind Speed (mi/h)\",\n     ylabel = \"Rate of Spread (ft/min)\",\n     title = \"Fire Spread Rate vs Wind Speed\\n(Fuel Model 1, Short Grass)\",\n     legend = false,\n     linewidth = 2,\n     marker = :circle)\nsavefig(\"wind_effect.png\"); nothing # hide\n\n(Image: Wind effect on spread rate)","category":"section"},{"location":"rothermel/#Effect-of-Fuel-Moisture","page":"Rothermel Fire Spread Model","title":"Effect of Fuel Moisture","text":"# Calculate spread rate for different fuel moisture contents\nmoisture_contents = 0.02:0.01:0.12  # 2% to 12% (extinction)\nspread_rates_moist = Float64[]\n\nU_wind = 220.0 * ftmin_to_ms  # 2.5 mi/h in m/s\n\nfor Mf in moisture_contents\n    params = merge(base_params, Dict(compiled_sys.Mf => Mf, compiled_sys.U => U_wind))\n    prob = NonlinearProblem(compiled_sys, params)\n    sol = solve(prob)\n    push!(spread_rates_moist, sol[compiled_sys.R])\nend\n\nplot(moisture_contents .* 100,\n     spread_rates_moist ./ ftmin_to_ms,\n     xlabel = \"Fuel Moisture Content (%)\",\n     ylabel = \"Rate of Spread (ft/min)\",\n     title = \"Fire Spread Rate vs Fuel Moisture\\n(Fuel Model 1, 2.5 mi/h wind)\",\n     legend = false,\n     linewidth = 2,\n     marker = :circle)\nsavefig(\"moisture_effect.png\"); nothing # hide\n\n(Image: Moisture effect on spread rate)","category":"section"},{"location":"rothermel/#Flame-Length-Prediction","page":"Rothermel Fire Spread Model","title":"Flame Length Prediction","text":"# Calculate flame length for different wind speeds\nflame_lengths = Float64[]\n\nfor U in wind_speeds_ms\n    prob = NonlinearProblem(compiled_sys, merge(base_params, Dict(compiled_sys.U => U)))\n    sol = solve(prob)\n    push!(flame_lengths, sol[compiled_sys.F_L])\nend\n\nplot(wind_speeds_ms ./ 0.447,  # Convert m/s to mi/h\n     flame_lengths ./ ft_to_m,  # Convert m to ft\n     xlabel = \"Wind Speed (mi/h)\",\n     ylabel = \"Flame Length (ft)\",\n     title = \"Flame Length vs Wind Speed\\n(Fuel Model 1, Short Grass)\",\n     legend = false,\n     linewidth = 2,\n     marker = :circle)\nsavefig(\"flame_length.png\"); nothing # hide\n\n(Image: Flame length)","category":"section"},{"location":"rothermel/#Standard-Fuel-Models","page":"Rothermel Fire Spread Model","title":"Standard Fuel Models","text":"The Rothermel model uses standardized fuel model parameters. The 13 original fuel models and 40 Scott and Burgan fuel models define typical vegetation types. For Fuel Model 1 (short grass) used in the examples above:\n\nParameter US Customary SI Value\nSAV ratio (σ) 3,500 1/ft 11,483 1/m\nFuel load (w0) 0.034 lb/ft² (0.74 ton/acre) 0.166 kg/m²\nFuel bed depth (δ) 1.0 ft 0.305 m\nMoisture of extinction (Mx) 0.12 (12%) 0.12 (12%)\nHeat content (h) 8,000 Btu/lb 18,608,000 J/kg\nParticle density (ρ_p) 32 lb/ft³ 512.6 kg/m³","category":"section"},{"location":"rothermel/#Related-Models","page":"Rothermel Fire Spread Model","title":"Related Models","text":"","category":"section"},{"location":"rothermel/#Dynamic-Fuel-Model-Load-Transfer","page":"Rothermel Fire Spread Model","title":"Dynamic Fuel Model Load Transfer","text":"The DynamicFuelLoadTransfer component simulates the curing of herbaceous fuels by transferring load from live to dead fuel categories based on live herbaceous moisture:\n\nT = -111 cdot M_flive + 133 quad (0 leq T leq 1)","category":"section"},{"location":"rothermel/#Live-Fuel-Moisture-of-Extinction","page":"Rothermel Fire Spread Model","title":"Live Fuel Moisture of Extinction","text":"The LiveFuelMoistureExtinction component calculates the moisture content at which live fuel will no longer sustain fire spread:\n\nM_xlive = maxleft(M_xdead 29 W left(1 - fracM_fdeadM_xdeadright) - 0226right)","category":"section"},{"location":"rothermel/#Wind-Limit","page":"Rothermel Fire Spread Model","title":"Wind Limit","text":"The WindLimit component calculates the maximum effective wind speed that can influence fire spread rate. The corrected equation (Andrews et al. 2013) in SI units is:\n\nU_limit = 00857 cdot I_R^13\n\nwhere U_limit is in m/s and I_R is in W/m².","category":"section"},{"location":"rothermel/#WildlandFire.RothermelFireSpread","page":"Rothermel Fire Spread Model","title":"WildlandFire.RothermelFireSpread","text":"RothermelFireSpread(; name=:RothermelFireSpread)\n\nCreate a Rothermel surface fire spread model system.\n\nThe Rothermel model is a semi-empirical model for predicting the rate of spread of surface fires in wildland fuels. It calculates the fire spread rate based on a heat source/heat sink balance, where the heat source is the reaction intensity modified by wind and slope factors, and the heat sink is the energy required to raise the fuel to ignition temperature.\n\nnote: Units\nThis implementation uses SI units. The original Rothermel equations were calibrated in US customary units, so all empirical coefficients have been converted to SI. Key unit conversions from the original formulation:Length: 1 ft = 0.3048 m\nMass: 1 lb = 0.453592 kg\nEnergy: 1 Btu = 1055.06 J\nLoad: 1 lb/ft² = 4.88243 kg/m²\nDensity: 1 lb/ft³ = 16.0185 kg/m³\n\nArguments\n\nname: System name (default: :RothermelFireSpread)\n\nModel Description\n\nThe fundamental equation is:\n\nR = IR * ξ * (1 + φw + φs) / (ρb * ε * Qig)\n\nWhere:\n\nR: Rate of spread (m/s)\nIR: Reaction intensity (W/m²)\nξ: Propagating flux ratio (dimensionless)\nφw: Wind factor (dimensionless)\nφs: Slope factor (dimensionless)\nρb: Bulk density (kg/m³)\nε: Effective heating number (dimensionless)\nQig: Heat of preignition (J/kg)\n\nReference\n\nAndrews, Patricia L. 2018. The Rothermel surface fire spread model and associated developments: A comprehensive explanation. Gen. Tech. Rep. RMRS-GTR-371. Fort Collins, CO: U.S. Department of Agriculture, Forest Service, Rocky Mountain Research Station. 121 p.\n\nExample\n\nusing ModelingToolkit, WildlandFire, OrdinaryDiffEqDefault\n\nsys = RothermelFireSpread()\ncompiled_sys = mtkcompile(sys)\n\n# Set parameters for fuel model 1 (short grass) in SI units\n# Note: This is an algebraic system, so we use NonlinearProblem\nprob = NonlinearProblem(compiled_sys, Dict(\n    compiled_sys.σ => 11483.0,     # SAV ratio (1/m), converted from 3500 1/ft\n    compiled_sys.w0 => 0.166,      # Fuel load (kg/m²), converted from 0.034 lb/ft²\n    compiled_sys.δ => 0.3048,      # Fuel bed depth (m), converted from 1.0 ft\n    compiled_sys.Mx => 0.12,       # Moisture of extinction (fraction)\n    compiled_sys.Mf => 0.05,       # Fuel moisture content (fraction)\n    compiled_sys.U => 2.235,       # Wind speed (m/s), converted from 5 mi/h\n    compiled_sys.tanϕ => 0.0       # Slope (flat)\n))\nsol = solve(prob)\n\n\n\n\n\n","category":"function"},{"location":"rothermel/#WildlandFire.DynamicFuelLoadTransfer","page":"Rothermel Fire Spread Model","title":"WildlandFire.DynamicFuelLoadTransfer","text":"DynamicFuelLoadTransfer(; name=:DynamicFuelLoadTransfer)\n\nCreate a dynamic fuel model load transfer system.\n\nDynamic fuel models transfer load from live herbaceous fuel to dead herbaceous fuel based on the live herbaceous fuel moisture content. This simulates the curing of herbaceous fuels as they dry out during the fire season.\n\nTransfer Equation\n\nThe fraction of live herbaceous load transferred to dead herbaceous is:\n\nT = -1.11 * Mf_live_herb + 1.33    (0 ≤ T ≤ 1.0)\n\nWhere Mf_live_herb is the live herbaceous fuel moisture content (fraction).\n\nReference\n\nAndrews, Patricia L. 2018. The Rothermel surface fire spread model and associated developments: A comprehensive explanation. Gen. Tech. Rep. RMRS-GTR-371. Fort Collins, CO: U.S. Department of Agriculture, Forest Service, Rocky Mountain Research Station. 121 p.\n\n\n\n\n\n","category":"function"},{"location":"rothermel/#WildlandFire.LiveFuelMoistureExtinction","page":"Rothermel Fire Spread Model","title":"WildlandFire.LiveFuelMoistureExtinction","text":"LiveFuelMoistureExtinction(; name=:LiveFuelMoistureExtinction)\n\nCreate a system for calculating live fuel moisture of extinction.\n\nThe live fuel moisture of extinction is calculated based on the ratio of dead to live fuel loading weighted by effective heating numbers, and the dead fuel moisture content.\n\nReference\n\nAndrews, Patricia L. 2018. The Rothermel surface fire spread model and associated developments: A comprehensive explanation. Gen. Tech. Rep. RMRS-GTR-371. Fort Collins, CO: U.S. Department of Agriculture, Forest Service, Rocky Mountain Research Station. 121 p.\n\n\n\n\n\n","category":"function"},{"location":"rothermel/#WildlandFire.EffectiveMidflameWindSpeed","page":"Rothermel Fire Spread Model","title":"WildlandFire.EffectiveMidflameWindSpeed","text":"EffectiveMidflameWindSpeed(; name=:EffectiveMidflameWindSpeed)\n\nCreate a system for calculating effective midflame wind speed.\n\nThe effective midflame wind speed combines the effects of actual wind and slope into an equivalent wind speed for fire behavior calculations.\n\nReference\n\nAndrews, Patricia L. 2018. The Rothermel surface fire spread model and associated developments: A comprehensive explanation. Gen. Tech. Rep. RMRS-GTR-371. Fort Collins, CO: U.S. Department of Agriculture, Forest Service, Rocky Mountain Research Station. 121 p.\n\n\n\n\n\n","category":"function"},{"location":"rothermel/#WildlandFire.WindLimit","page":"Rothermel Fire Spread Model","title":"WildlandFire.WindLimit","text":"WindLimit(; name=:WindLimit, use_corrected=true)\n\nCreate a system for calculating the maximum effective wind speed limit.\n\nThe wind limit represents the maximum effective wind speed that can influence fire spread rate. Beyond this limit, the wind factor is capped.\n\nArguments\n\nuse_corrected: If true (default), use the corrected equation from Andrews et al. 2013.                  If false, use the original equation.\n\nReference\n\nAndrews, Patricia L. 2018. The Rothermel surface fire spread model and associated developments: A comprehensive explanation. Gen. Tech. Rep. RMRS-GTR-371. Fort Collins, CO: U.S. Department of Agriculture, Forest Service, Rocky Mountain Research Station. 121 p.\n\n\n\n\n\n","category":"function"}]
}
